(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/wm-poster/wm-poster"],{675:
/*!*************************************************************!*\
  !*** C:/work/haisheng_m/components/wm-poster/wm-poster.vue ***!
  \*************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var r=n(/*! ./wm-poster.vue?vue&type=template&id=0900cee4& */676),i=n(/*! ./wm-poster.vue?vue&type=script&lang=js& */678);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var c,u=n(/*! ../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),l=Object(u["default"])(i["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],c);l.options.__file="components/wm-poster/wm-poster.vue",e["default"]=l.exports},676:
/*!********************************************************************************************!*\
  !*** C:/work/haisheng_m/components/wm-poster/wm-poster.vue?vue&type=template&id=0900cee4& ***!
  \********************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var r=n(/*! -!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wm-poster.vue?vue&type=template&id=0900cee4& */677);n.d(e,"render",(function(){return r["render"]})),n.d(e,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(e,"components",(function(){return r["components"]}))},677:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/work/haisheng_m/components/wm-poster/wm-poster.vue?vue&type=template&id=0900cee4& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";var r;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return c})),n.d(e,"recyclableRender",(function(){return a})),n.d(e,"components",(function(){return r}));var i=function(){var t=this,e=t.$createElement;t._self._c},a=!1,c=[];i._withStripped=!0},678:
/*!**************************************************************************************!*\
  !*** C:/work/haisheng_m/components/wm-poster/wm-poster.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var r=n(/*! -!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../software/setup/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wm-poster.vue?vue&type=script&lang=js& */679),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},679:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/work/haisheng_m/components/wm-poster/wm-poster.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=a(n(/*! ./node_modules/@vue/babel-preset-app/node_modules/@babel/runtime/regenerator */19));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,r,i,a,c){try{var u=t[a](c),l=u.value}catch(o){return void n(o)}u.done?e(l):Promise.resolve(l).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function u(t){c(a,r,i,u,l,"next",t)}function l(t){c(a,r,i,u,l,"throw",t)}u(void 0)}))}}var l={name:"wm-poster",props:{CanvasID:{Type:String,default:"PosterCanvas"},imgSrc:{Type:String,default:""},QrSrc:{Type:String,default:""},Title:{Type:String,default:""},TitleColor:{Type:String,default:"#333333"},LineType:{Type:[String,Boolean],default:!0},PriceTxt:{Type:String,default:""},PriceColor:{Type:String,default:"#e31d1a"},OriginalTxt:{Type:String,default:""},OriginalColor:{Type:String,default:"#b8b8b8"},Width:{Type:String,default:750},CanvasBg:{Type:String,default:"#ffffff"},Referrer:{Type:String,default:"quitter推荐给你"},ViewDetails:{Type:String,default:"长按或扫描识别二维码"}},data:function(){return{canvasW:0,canvasH:0,canvasImgSrc:"",ctx:null,tempFilePath:""}},methods:{OnCanvas:function(){var e=this;return u(i.default.mark((function n(){var a,c,u,l,o,s,f,x,p,d,g,T,v;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.ctx=t.createCanvasContext(r.CanvasID,e),a=t.upx2px(r.Width),c=t.upx2px(30),u=t.upx2px(200),l=0,n.next=5,r.getImageInfo({imgSrc:r.imgSrc});case 5:return o=n.sent,n.next=8,r.getImageInfo({imgSrc:r.QrSrc});case 8:s=n.sent,f=[o.width,o.height],x=[s.width,s.height],p=a-2*c,f[0]!=p&&(f[1]=Math.floor(p/f[0]*f[1]),f[0]=p),x[0]!=u&&(x[1]=Math.floor(u/x[0]*x[1]),x[0]=u),r.canvasW=a,r.canvasH=f[1]+x[1]+100,r.ctx.setFillStyle(r.CanvasBg),r.ctx.fillRect(0,0,a,r.canvasH),r.ctx.drawImage(o.path,c,c,f[0],f[1]),r.ctx.setFontSize(t.upx2px(28)),r.ctx.setFillStyle(r.TitleColor),d=0,g=f[1]+2*c+10,T=1,v=0;case 25:if(!(v<r.Title.length)){n.next=47;break}if(l+=r.ctx.measureText(r.Title[v]).width,!(l>f[0])){n.next=43;break}if(2!=T||!r.LineType){n.next=36;break}return r.ctx.fillText(r.Title.substring(d,v-8)+"...",c,g),l=0,d=v,T++,n.abrupt("break",47);case 36:r.ctx.fillText(r.Title.substring(d,v),c,g),l=0,g+=20,d=v,T++;case 41:n.next=44;break;case 43:v==r.Title.length-1&&(r.ctx.fillText(r.Title.substring(d,v+1),c,g),l=0);case 44:v++,n.next=25;break;case 47:""!=r.PriceTxt&&(l=c,g+=t.upx2px(60),1==T&&(g+=20),r.ctx.setFillStyle(r.PriceColor),r.ctx.setFontSize(t.upx2px(38)),r.ctx.fillText(r.PriceTxt,l,g),l+=r.ctx.measureText(r.PriceTxt).width+t.upx2px(10)),""!=r.PriceTxt&&""!=r.OriginalTxt&&(r.ctx.setFillStyle(r.OriginalColor),r.ctx.setFontSize(t.upx2px(24)),r.ctx.fillText(r.OriginalTxt,l,g)),r.ctx.strokeStyle=r.OriginalColor,r.ctx.moveTo(l,g-t.upx2px(10)),r.ctx.lineTo(l+r.ctx.measureText(r.OriginalTxt).width,g-t.upx2px(10)),r.ctx.stroke(),g+=t.upx2px(20),r.ctx.drawImage(s.path,f[0]-x[0]+c,g,x[0],x[1]),r.ctx.setFillStyle(r.TitleColor),r.ctx.setFontSize(t.upx2px(30)),r.ctx.fillText(r.Referrer,c,g+x[1]/2),r.ctx.setFillStyle(r.OriginalColor),r.ctx.setFontSize(t.upx2px(24)),r.ctx.fillText(r.ViewDetails,c,g+x[1]/2+20),setTimeout((function(){r.ctx.draw(!0,(function(t){r.getNewImage()}))}),600);case 62:case"end":return n.stop()}}),n)})))()},getImageInfo:function(e){return u(i.default.mark((function n(){var r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.imgSrc,n.abrupt("return",new Promise((function(e,n){t.getImageInfo({src:r,success:function(t){e(t)},fail:function(t){n(t)}})})));case 2:case"end":return n.stop()}}),n)})))()},getNewImage:function(){t.canvasToTempFilePath({canvasId:r.CanvasID,quality:1,complete:function(t){r.$emit("success",t)}},this)}},mounted:function(){r=this,r.OnCanvas()}};e.default=l}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/wm-poster/wm-poster.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/wm-poster/wm-poster-create-component',
    {
        'components/wm-poster/wm-poster-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(675))
        })
    },
    [['components/wm-poster/wm-poster-create-component']]
]);
